<!--
  ~ Created by Alex Matos Iuasse.
  ~ Copyright (c) 2020.  All rights reserved.
  ~ Last modified 14/09/2020 13:05.
  -->

{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="container-xl">
    <div class="hr-text">Hoje</div>
    <div class="page-header">
        <div class="row align-items-center">
            <div class="col-auto">
                <div class="page-pretitle">
                    {{today.pre_title}}
                </div>
                <h2 class="page-title">
                    <span class="text-primary">{{today.title.icon|safe}}</span>
                    {{today.title.text}}
                </h2>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-6 col-md-12">
            <div class="card">
                <div class="card-header bg-triangle-top-primary">
                    <div class="card-title">
                        {{birthdays.title.icon|safe}}
                        {{birthdays.title.text}}
                    </div>
                </div>
                <div class="card-body">
                    {% if birthdays.data %}
                    {% for obj in birthdays.data %}
                    <p>
                        <a href="{{obj.get_absolute_url}}" target="_blank">
                            {{obj.get_full_name}}
                        </a>
                        faz <span class="font-weight-bold">{{obj.get_age}}</span> anos hoje,
                        Whatsapp: <span class="font-weight-bold">{{obj.whatsapp}}</span>
                    </p>
                    {% endfor %}
                    {% else %}
                    <p>Nenhum aniversariante hoje!</p>
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="col-lg-6 col-md-12">
            <div class="card">
                <div class="card-header bg-triangle-top-success">
                    <div class="card-title">
                        {{services_today.title.icon|safe}}
                        {{services_today.title.text}}
                    </div>
                </div>
                <div class="card-body">
                    {% if services_today.data %}
                    {% for obj in services_today.data %}
                    <p>
                        <a href="{{obj.get_absolute_url}}" target="_blank">
                            {{obj.get_full_name}}
                        </a>
                        para às <span class="font-weight-bold">{{obj.time}}</span>
                    </p>
                    {% endfor %}
                    {% else %}
                    <p>Nenhum procedimento para hoje!</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container-xl dashboard">
    <div class="hr-text">Atenção</div>
    <div class="page-header">
        <div class="row align-items-center">
            <div class="col-auto">
                <div class="page-pretitle">
                    {{atention.pre_title}}
                </div>
                <h2 class="page-title">
                    <span class="text-warning">{{atention.title.icon|safe}}</span>
                    {{atention.title.text}}
                </h2>
            </div>
        </div>
    </div>
    <div class="row">
        {% if rewards_not_retrieved.data %}
        <div class="col-lg-6 col-md-12">
            <div class="card">
                <div class="card-header bg-triangle-top-warning">
                    <div class="card-title">
                        {{rewards_not_retrieved.title.icon|safe}}
                        {{rewards_not_retrieved.title.text}}
                        <a class="ml-auto text-info" data-toggle="tooltip" href="{% url 'users:rewardretrieved:list' %}"
                           target="_blank" title={{TOOLTIP_SEE_ALL}}>
                            {{ICON_EYE|safe}}
                        </a>
                    </div>

                </div>
                <div class="card-body">
                    {% for obj in rewards_not_retrieved.data %}
                    <p>
                        <span class="font-weight-bold">{{obj.reward}}</span> de
                        <a href="{{obj.customer.profile.get_absolute_url}}" target="_blank">
                            {{obj.customer.profile.get_full_name}}
                        </a>
                        requisitado no dia <span class="font-weight-bold">{{obj.date}}</span>
                    </p>
                    {% endfor %}
                </div>
                <div class="card-footer">
                    <p>Esse aviso é para os brindes que ainda não foram retirados.</p>
                </div>
            </div>
        </div>
        {% endif %}
        {% if services_not_confirmed.data %}
        <div class="col-lg-6 col-md-12">
            <div class="card">
                <div class="card-header bg-triangle-top-warning">
                    <div class="card-title">
                        {{services_not_confirmed.title.icon|safe}}
                        {{services_not_confirmed.title.text}}
                    </div>
                </div>
                <div class="card-body">
                    {% for obj in services_not_confirmed.data %}
                    <p>
                        <a href="{{obj.get_absolute_url}}" target="_blank">
                            {{obj.get_full_name}}
                        </a>
                        para o dia <span class="font-weight-bold">{{obj.date}}</span>
                        às <span class="font-weight-bold">{{obj.time}}</span>
                    </p>
                    {% endfor %}
                </div>
                <div class="card-footer">
                    <p>Esse aviso é para os procedimentos que ainda não foram confirmados.</p>
                </div>
            </div>
        </div>
        {% endif %}
        {% if services_invoice_not_completed.data %}
        <div class="col-lg-6 col-md-12">
            <div class="card">
                <div class="card-header bg-triangle-top-danger">
                    <div class="card-title">
                        {{services_invoice_not_completed.title.icon|safe}}
                        {{services_invoice_not_completed.title.text}}
                    </div>
                </div>
                <div class="card-body">
                    {% for obj in services_invoice_not_completed.data %}
                    <p>
                        <a href="{{obj.get_absolute_url}}" target="_blank">
                            {{obj.get_full_name}}
                        </a>
                        para o dia <span class="font-weight-bold">{{obj.date}}</span>
                        às <span class="font-weight-bold">{{obj.time}}</span>
                    </p>
                    {% endfor %}
                </div>
                <div class="card-footer">
                    <p>Esse aviso é para os procedimentos que não tiveram o faturamento completo depois da data
                        agendada.</p>
                </div>
            </div>
        </div>
        {% endif %}
    </div>

</div>
{% endblock %}